
<div class="container">

    <h1 class="mt-3">Contact List</h1>
    <div class="d-flex justify-content-end">
        <a class="btn btn-primary" [routerLink]="['/addContact']">Add Contact</a>
    </div>

    <ng-container *ngIf="errorMessage" class="error">
      {{ errorMessage }}
    </ng-container>

    <ng-container *ngIf="contactList$ | async as contacts">
    <div class="mt-3 d-flex justify-content-center align-items-center" *ngIf="contacts.length > 0" style="width: 100%;">
        <table class="table table-bordered">
            <thead class="thead-dark">
              <tr>
                  <th scope="col" style="text-align: left;">
                    <span style="display: inline-flex; align-items: center; gap: 2px;">
                    FirstName
                      <button type="button" class="btn btn-light custom-btn"  (click)="sort('firstName', 'asc')">
                        <i class="bi bi-arrow-up"></i>
                      </button>
                      <button type="button" class="btn btn-light custom-btn" (click)="sort('firstName', 'desc')">
                        <i class="bi bi-arrow-down"></i>
                      </button>
                    </span>
                </th>
                <th scope="col" style="text-align: left;">
                  <span style="display: inline-flex; align-items: center; gap: 2px;">
                  LastName
                    <button type="button" class="btn btn-light custom-btn"  (click)="sort('lastName', 'asc')">
                      <i class="bi bi-arrow-up"></i>
                    </button>
                    <button type="button" class="btn btn-light custom-btn" (click)="sort('lastName', 'desc')">
                      <i class="bi bi-arrow-down"></i>
                    </button>
                  </span>
              </th>
                <th scope="col" style="text-align: left;">
                  <span style="display: inline-flex; align-items: center; gap: 2px;">
                    Email
                    <button type="button" class="btn btn-light custom-btn"  (click)="sort('email', 'asc')">
                      <i class="bi bi-arrow-up"></i>
                    </button>
                    <button type="button" class="btn btn-light custom-btn" (click)="sort('email', 'desc')">
                      <i class="bi bi-arrow-down"></i>
                    </button>
                  </span>
                </th>
                <th scope="col" style="text-align: left;">
                  <span style="display: inline-flex; align-items: center; gap: 2px;">PhoneNumber
                    <button type="button" class="btn btn-light custom-btn"  (click)="sort('phoneNumber', 'asc')">
                      <i class="bi bi-arrow-up"></i>
                    </button>
                    <button type="button" class="btn btn-light custom-btn" (click)="sort('phoneNumber', 'desc')">
                      <i class="bi bi-arrow-down"></i>
                    </button>
                  </span>
                </th>
                <th scope="col" style="text-align: left;">
                  <span style="display: inline-flex; align-items: center; gap: 2px;">Address
                    <button type="button" class="btn btn-light custom-btn"  (click)="sort('address', 'asc')">
                      <i class="bi bi-arrow-up"></i>
                    </button>
                    <button type="button" class="btn btn-light custom-btn" (click)="sort('address', 'desc')">
                      <i class="bi bi-arrow-down"></i>
                    </button>
                  </span>
                </th>
                <th scope="col" style="text-align: left;">
                  <span style="display: inline-flex; align-items: center; gap: 2px;">City
                    <button type="button" class="btn btn-light custom-btn"  (click)="sort('city', 'asc')">
                      <i class="bi bi-arrow-up"></i>
                    </button>
                    <button type="button" class="btn btn-light custom-btn" (click)="sort('city', 'desc')">
                      <i class="bi bi-arrow-down"></i>
                    </button>
                  </span>
                </th>
                <th scope="col" style="text-align: left;">
                  <span style="display: inline-flex; align-items: center; gap: 2px;">State
                    <button type="button" class="btn btn-light custom-btn"  (click)="sort('state', 'asc')">
                      <i class="bi bi-arrow-up"></i>
                    </button>
                    <button type="button" class="btn btn-light custom-btn" (click)="sort('state', 'desc')">
                      <i class="bi bi-arrow-down"></i>
                    </button>
                  </span>
                </th>
                <th scope="col" style="text-align: left;">
                  <span style="display: inline-flex; align-items: center; gap: 2px;">Country
                    <button type="button" class="btn btn-light custom-btn"  (click)="sort('country', 'asc')">
                      <i class="bi bi-arrow-up"></i>
                    </button>
                    <button type="button" class="btn btn-light custom-btn" (click)="sort('country', 'desc')">
                      <i class="bi bi-arrow-down"></i>
                    </button>
                  </span>
                </th>
                <th scope="col" style="text-align: left;">
                  <span style="display: inline-flex; align-items: center; gap: 2px;">PostalCode
                    <button type="button" class="btn btn-light custom-btn"  (click)="sort('postalCode', 'asc')">
                      <i class="bi bi-arrow-up"></i>
                    </button>
                    <button type="button" class="btn btn-light custom-btn" (click)="sort('postalCode', 'desc')">
                      <i class="bi bi-arrow-down"></i>
                    </button>
                  </span>
                </th>
                <th scope="col">Action</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let item of contacts">
                <td>{{item.firstName}}</td>
                <td>{{item.lastName}}</td>
                <td>{{item.email}}</td>
                <td>{{item.phoneNumber}}</td>
                <td>{{item.address}}</td>
                <td>{{item.city}}</td>
                <td>{{item.state}}</td>
                <td>{{item.country}}</td>
                <td>{{item.postalCode}}</td>
                <td class="d-flex align-items-center">
                  <a [routerLink]="['/editContact', item.id]" class="btn btn-primary btn-sm me-3" title="Edit">
                    <i class="bi bi-pencil-fill"></i>
                </a>
                <a (click)="deleteContact(item.firstName + ' ' + item.lastName, item.id)" class="btn btn-danger btn-sm" title="Delete">
                    <i class="bi bi-trash-fill"></i>
                </a>
                </td>
              </tr>
               </tbody>
          </table>
    </div>
  </ng-container>
    
</div>